# ğŸ¤– Genesis Chronicle CI/CD è‡ªå‹•åŒ–æ§‹å»º

## ğŸ¯ é›™ Workflow ç­–ç•¥

åŸºæ–¼ SQT æ·±åº¦åˆ†æï¼Œæ¡ç”¨**è·è²¬åˆ†é›¢**çš„è¨­è¨ˆï¼š

### ğŸ§ª æ¸¬è©¦æ§‹å»º (`test-build.yml`)
- **è§¸ç™¼æ–¹å¼**: æ‰‹å‹•è§¸ç™¼ (workflow_dispatch)
- **ç”¨é€”**: é–‹ç™¼æ¸¬è©¦ï¼Œä¸ç™¼å¸ƒç‰ˆæœ¬
- **å¹³å°é¸æ“‡**: both / macos / windows
- **ç”¢å‡º**: GitHub Artifacts (ä¿å­˜7å¤©)

### ğŸš€ æ­£å¼ç™¼å¸ƒ (`release.yml`) 
- **è§¸ç™¼æ–¹å¼**: æ¨é€ç‰ˆæœ¬æ¨™ç±¤ (v*)
- **ç”¨é€”**: è‡ªå‹•ç™¼å¸ƒæ­£å¼ç‰ˆæœ¬
- **å¹³å°**: åŒæ™‚æ§‹å»º macOS + Windows
- **ç”¢å‡º**: GitHub Release + å®‰è£æª”

## ğŸ”¥ å¿«é€Ÿé–‹å§‹

### 1ï¸âƒ£ æ¸¬è©¦æ§‹å»º (é–‹ç™¼éšæ®µ)
1. å‰å¾€ [GitHub Actions](../../actions)
2. é¸æ“‡ "ğŸ§ª Test Build"
3. é»æ“Š "Run workflow"
4. é¸æ“‡æ§‹å»ºå¹³å°ï¼š
   - `both` - åŒæ™‚æ§‹å»ºå…©å€‹å¹³å° (æ¨è–¦)
   - `macos` - åƒ…æ§‹å»º macOS ç‰ˆæœ¬
   - `windows` - åƒ…æ§‹å»º Windows ç‰ˆæœ¬

**ğŸ“¥ ä¸‹è¼‰æ¸¬è©¦ç‰ˆæœ¬**ï¼š
æ§‹å»ºå®Œæˆå¾Œåœ¨ Actions é é¢ä¸‹è¼‰ artifacts

### 2ï¸âƒ£ æ­£å¼ç™¼å¸ƒ (ç”Ÿç”¢éšæ®µ)
```bash
# 1. ç¢ºä¿æ‰€æœ‰ä¿®æ”¹å·²æäº¤
git add .
git commit -m "ğŸ‰ Release v1.0.2"
git push origin main

# 2. å‰µå»ºä¸¦æ¨é€ç‰ˆæœ¬æ¨™ç±¤
git tag v1.0.2
git push origin v1.0.2
```

**âœ¨ è‡ªå‹•åŒ–æµç¨‹æœƒï¼š**
- ğŸ—ï¸ ä¸¦è¡Œæ§‹å»º macOS + Windows ç‰ˆæœ¬
- ğŸ“¦ å‰µå»º GitHub Release
- â¬†ï¸ ä¸Šå‚³å®‰è£æª” (.dmg / .msi)  
- ğŸ“ ç”Ÿæˆå®Œæ•´ç™¼å¸ƒèªªæ˜

## ğŸ“‹ æ§‹å»ºç”¢ç‰©

| å¹³å° | ç›®æ¨™æ¶æ§‹ | è¼¸å‡ºæ ¼å¼ | é æœŸå¤§å° |
|------|----------|----------|----------|  
| **ğŸ macOS** | Universal (Intel + Apple Silicon) | `.dmg` | ~26MB |
| **ğŸªŸ Windows** | x64 | `.msi` | ~30-40MB |

## ğŸ—ï¸ å·¥ä½œæµç¨‹æ¶æ§‹

```
.github/workflows/
â”œâ”€â”€ ğŸ§ª test-build.yml     # æ‰‹å‹•æ¸¬è©¦æ§‹å»º
â””â”€â”€ ğŸš€ release.yml        # æ¨™ç±¤è§¸ç™¼ç™¼å¸ƒ
```

### æ ¸å¿ƒå„ªå‹¢
- âœ… **ç°¡åŒ–é‚è¼¯**: é¿å…è¤‡é›œæ¢ä»¶è¡¨é”å¼
- âœ… **ä¸¦è¡Œæ§‹å»º**: æå‡æ§‹å»ºæ•ˆç‡ 
- âœ… **è·è²¬åˆ†é›¢**: æ¸¬è©¦èˆ‡ç™¼å¸ƒæµç¨‹ç¨ç«‹
- âœ… **æ˜“æ–¼èª¿è©¦**: æ¸…æ™°çš„éŒ¯èª¤æç¤º

## ğŸ® ä½¿ç”¨ç¯„ä¾‹

### é–‹ç™¼éšæ®µ - æ¸¬è©¦æ–°åŠŸèƒ½
1. ä¿®æ”¹ä»£ç¢¼ä¸¦æäº¤åˆ° GitHub
2. æ‰‹å‹•è§¸ç™¼ "ğŸ§ª Test Build" é¸æ“‡ `both`
3. ç­‰å¾…æ§‹å»ºå®Œæˆ (~10-15åˆ†é˜)
4. ä¸‹è¼‰ artifacts é€²è¡Œæ¸¬è©¦

### ç™¼å¸ƒéšæ®µ - æ­£å¼ç‰ˆæœ¬
```bash
# åŠŸèƒ½æ›´æ–°
git tag v1.1.0
git push origin v1.1.0

# éŒ¯èª¤ä¿®å¾©
git tag v1.0.2  
git push origin v1.0.2
```

## ğŸ“Š æ§‹å»ºç›£æ§

### æŸ¥çœ‹æ§‹å»ºç‹€æ…‹
- ğŸ“ˆ [Actions é é¢](../../actions) - å¯¦æ™‚æ§‹å»ºç‹€æ…‹
- ğŸ§ª [æ¸¬è©¦æ§‹å»º](../../actions/workflows/test-build.yml) - é–‹ç™¼æ¸¬è©¦
- ğŸš€ [æ­£å¼ç™¼å¸ƒ](../../actions/workflows/release.yml) - ç‰ˆæœ¬ç™¼å¸ƒ

### ä¸‹è¼‰å®‰è£æª”
- ğŸ“¦ [Releases é é¢](../../releases) - æ‰€æœ‰æ­£å¼ç‰ˆæœ¬
- ğŸ¯ [æœ€æ–°ç‰ˆæœ¬](../../releases/latest) - å¿«é€Ÿä¸‹è¼‰

## ğŸ”§ æŠ€è¡“ç´°ç¯€

### æ§‹å»ºç’°å¢ƒ
- **Node.js**: v18 (LTS)
- **Rust**: æœ€æ–°ç©©å®šç‰ˆ
- **Tauri**: v2.7.0
- **å¿«å–ç­–ç•¥**: Rust cargo + npm æ™ºèƒ½å¿«å–

### ç›®æ¨™å¹³å°
```yaml
# macOS æ§‹å»º
runs-on: macos-latest
target: universal-apple-darwin

# Windows æ§‹å»º  
runs-on: windows-latest
target: x86_64-pc-windows-msvc
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ
1. **ğŸš¨ æ§‹å»ºå¤±æ•—**: æª¢æŸ¥ Actions è©³ç´°æ—¥èªŒ
2. **âš ï¸ ç‰ˆæœ¬è¡çª**: ç¢ºä¿ `src-tauri/Cargo.toml` ç‰ˆæœ¬èˆ‡æ¨™ç±¤ä¸€è‡´
3. **ğŸ’¥ ä¾è³´éŒ¯èª¤**: æ¸…é™¤å¿«å–æˆ–æª¢æŸ¥ä¾è³´ç‰ˆæœ¬

### æœ¬åœ°åµéŒ¯
```bash
# å‰ç«¯æ§‹å»ºæ¸¬è©¦
npm run build:renderer

# macOS æœ¬åœ°æ§‹å»º
cargo tauri build --target universal-apple-darwin

# Windows æœ¬åœ°æ§‹å»º (åƒ…é™ Windows ç³»çµ±)
cargo tauri build --target x86_64-pc-windows-msvc
```

### æ§‹å»ºå¤±æ•—æ•‘æ´
1. æª¢æŸ¥ Actions é é¢çš„è©³ç´°éŒ¯èª¤æ—¥èªŒ
2. ç¢ºèªæ‰€æœ‰ä¾è³´ç‰ˆæœ¬ç›¸å®¹æ€§
3. é‡æ–°è§¸ç™¼å¤±æ•—çš„ workflow
4. è¯ç¹«é–‹ç™¼è€… [@tznthou](https://github.com/tznthou)

---

ğŸ‰ **å°ˆæ¥­ç´š CI/CD ç³»çµ±ï¼šä¸€éµæ¸¬è©¦ï¼Œæ¨™ç±¤ç™¼å¸ƒï¼**